<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Portfolio - Caleb Kluchman</title>
  <link rel="stylesheet" href="css/style.css" />
  <style>
    /* Basic styling for the page */
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f9f9f9;
    }

    .nav-container {
      background-color: #481eaa;
      padding: 10px;
    }

    .nav-container nav ul {
      list-style-type: none;
      padding: 0;
      display: flex;
      justify-content: center;
    }

    .nav-container nav ul li {
      margin: 0 15px;
    }

    .nav-container nav ul li a {
      text-decoration: none;
      color: white;
      font-size: 18pt;
      padding: 5px 10px;
    }

    .nav-container nav ul li a:hover {
      background-color: #007bff;
    }

    /* Portfolio Container */
    .portfolio-container {
      padding: 20px;
      margin: 20px;
    }

    /* Portfolio Category Styling */
    .portfolio-category {
      padding: 20px;
      margin: 20px;
    }
        
    .portfolio-category h2 {
      border-bottom: 2px solid #481eaa;
      padding-bottom: 10px;
      margin-bottom: 20px;
      font-size: 24px;
    }

    /* Portfolio Items Styling */
    .portfolio-items {
      display: flex;
      overflow-x: auto;
      gap: 20px;
      padding: 10px 0;
      flex-wrap: nowrap;
    }

    .portfolio-item {
      flex: 0 0 auto;
      width: 250px;
      background-color: white;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      cursor: pointer;
      transition: transform 0.3s ease;
    }

    .portfolio-item:hover {
      transform: scale(1.05);
    }

    .portfolio-item img {
      width: 250px;
      height: 150px;
      object-fit: cover;
      border-radius: 0 0 8px 8px;
    }

    .portfolio-item h3 {
      text-align: center;
      color: #481eaa;
      background-color: #f0f0f0;
      margin: 0;
      padding: 20px;
      border-radius: 8px 8px 0 0;
    }

    /* Modal (for expanded project) */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.8);
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }

    .modal-content {
      background-color: white;
      padding: 20px;
      width: 70%;
      height: 90%;
      border-radius: 8px;
      position: relative;
      overflow: hidden;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    .modal img {
      width: 100%;
      height: auto;
      border-radius: 8px;
    }

    .interactive-map-container {
      width: 100%;
      height: 100%;
      border: 1px solid #ccc;
      border-radius: 8px;
      overflow: hidden;
    }

    .close-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      background-color: rgba(255, 255, 255, 0.8);
      border: none;
      padding: 10px;
      font-size: 20px;
      cursor: pointer;
    }

    .close-btn:hover {
      background-color: #007bff;
      color: white;
    }

    /* Carousel Styling for Example Projects */
    .carousel {
      position: relative;
      width: 100%;
      height: 70%;
      margin-bottom: 20px;
    }

    .carousel-slide {
      display: none;
      width: 100%;
      height: 100%;
    }

    .carousel-slide iframe {
      width: 100%;
      height: 100%;
      border: none;
    }

    /* Ensure images scale properly in slides */
    .carousel-slide img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      display: block;
    }

    .carousel-btn {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background-color: rgba(0, 0, 0, 0.5);
      color: white;
      border: none;
      padding: 10px;
      cursor: pointer;
    }

    #prev-btn {
      left: 10px;
    }

    #next-btn {
      right: 10px;
    }

    #carousel-description {
      text-align: center;
      font-size: 16px;
      padding: 10px;
    }
  </style>
</head>
<body>
  <!-- Navigation Bar -->
  <div class="nav-container">
    <nav>
      <ul>
        <li><a href="index.html">Back to Home</a></li>
      </ul>
    </nav>
  </div>

  <!-- Portfolio Section -->
  <div class="portfolio-container" id="Portfolio">
    <!-- Category: Maps (renamed) -->
    <div class="portfolio-category">
      <h2>Maps</h2>
      <div class="portfolio-items">
        <div class="portfolio-item" onclick="openProject('project_Interactive_DEVELOP_Map')">
          <h3>Interactive: Asheville Urban Heat Index</h3>
          <img src="images/HVI_Asheville_Preview.png" alt="HVI Asheville Preview">
          <p>Interactive web map showing a custom Heat Vulnerability Index, Albedo, Evapotranspiration, Celsius, and the CDC Social Vulnerability Index.</p>
        </div>
        <div class="portfolio-item" onclick="openProject('project_dashapp_Map')">
          <h3>Interactive: Publishing a Dashapp</h3>
          <img src="images/dashapp_preview_image.png" alt="Dashapp Preview">
          <p>Interactive app that retrieves and filters service requests in Boston, MA; published using Dash.</p>
        </div>
        <div class="portfolio-item" onclick="openProject('project_Solar_Panels_Map')">
          <h3>Interactive: Large Scale Solar Panels in Providence</h3>
          <img src="images/Providence_preview_image.png" alt="Solar Panels Map">
          <p>Interactive test application of the ArcPy SDK displaying large-scale solar panel data in Providence, RI.</p>
        </div>

        <!-- Moved here from Recent Projects -->
        <div class="portfolio-item" onclick="openProject('Random_Forest_Maps')">
          <h3>Interactive: Random Forest LULC Classification in R and QGIS</h3>
          <img src="images/RF_Spectral_LandCover.png" alt="Spectral Unmixing Maps">
          <p>Interactive carousel of Land Use Land Cover maps made with Random Forest in R, mapped in QGIS.</p>
        </div>
      </div>
    </div>

    <!-- Category: Full Presentations -->
    <div class="portfolio-category">
      <h2>Full Presentations</h2>
      <div class="portfolio-items">
        <div class="portfolio-item" onclick="openProject('project_DEVELOP_Presentation')">
          <h3>Urban Heat Island Effect in Asheville NC</h3>
          <img src="images/DEVELOP_Titlepage.png" alt="DEVELOP Presentation">
          <p>Full presentation to the City of Asheville and Asheville Greenworks on the UHI effect in Asheville and Vulnerable Populations for NASA DEVELOP.</p>
        </div>
        <div class="portfolio-item" onclick="openProject('project_HERO_Presentation')">
          <h3>Tree Survivorship in Worcester</h3>
          <img src="images/Hero_presentation_image.png" alt="HERO Presentation">
          <p>This presentation was given to the DCR and media on a study conducted with the HERO research fellowship on tree survivorship in Worcester, MA.</p>
        </div>
        <div class="portfolio-item" onclick="openProject('WCS_Presentation')">
          <h3>Wildlife Conservation Society Presentation</h3>
          <img src="images/WCS_Example_slide_3.png" alt="WCS Presentation">
          <p>The culmination of my consulting work for the Wildlife Conservation Society (WCS) where our team examined the health, risk, and changes to land use in WCS protected areas in Central and South America.</p>
        </div>
      </div>
    </div>

    <!-- Category: Posters -->
    <div class="portfolio-category">
      <h2>Posters</h2>
      <div class="portfolio-items">
        <div class="portfolio-item" onclick="openProject('project_Eucalyptus_Poster')">
          <h3>Eucalyptus Growth in SF Bay</h3>
          <img src="images/Eucalyptus_ML_image.png" alt="Eucalyptus Poster">
          <p>This was the poster component of my final project for the Advanced Raster GIS course, where I worked with a group to examine Eucalyptus Growth in the SF Bay area using Random Forests in GEE and Maximum Entropy in ArcGIS Pro.</p>
        </div>
        <div class="portfolio-item" onclick="openProject('project_NEARC_Poster')">
          <h3>NEARC: Urban Heat Inequality</h3>
          <img src="images/Nearc_Image.png" alt="NEARC Poster">
          <p>This poster represented my senior thesis work on urban heat island effects and environmental justice in Worcester, MA, and won a flash talk award at NEARC.</p>
        </div>
        <div class="portfolio-item" onclick="openProject('project_NESTVAL_Poster')">
          <h3>NESTVAL: Urban Tree Survivorship</h3>
          <img src="images/HERO2023_Quant_Poster.png" alt="NESTVAL Poster">
          <p>Award-winning poster for the NESTVAL conference on urban tree survivorship in Worcester, MA after large scale tree removal in 2010 due to the Longhorned Beetle.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal for showing full project -->
  <div id="modal" class="modal">
    <div class="modal-content">
      <span class="close-btn" onclick="closeModal()">&times;</span>
      <div id="modal-map" class="interactive-map-container"></div>
    </div>
  </div>

  <script>
    // Global slide index for carousel use
    let slideIndex = 0;

    function openProject(projectId) {
        const projects = {
            'project_Interactive_DEVELOP_Map': {
            title: 'Asheville Urban Heat Index',
            img: 'images/HVI_Asheville_Preview.png',
            iframeUrl: 'https://kluchman.github.io/HVI_leaflet_map/'
            },
            'project_dashapp_Map': {
            title: 'PROTOTYPE: Interactive Dashapp',
            img: 'images/dashapp_preview_image.png',
            iframeUrl: 'https://service-requests-dash-lab08-1.onrender.com/'
            },
            'project_HERO_Presentation': {
            title: 'Urban Tree Survivorship in Worcester',
            img: 'images/Hero_presentation_image.png',
            iframeUrl: 'images/CK_HERO_Tree_Mortality_Presentation.pdf'
            },
            'project_Eucalyptus_Poster': {
            title: 'Eucalyptus Growth in San Francisco Bay',
            img: 'images/Eucalyptus_ML_image.png',
            iframeUrl: 'images/CK_Eucalyptus_Growth_SF.pdf'
            },
            'project_Solar_Panels_Map': {
            title: 'PROTOTYPE: Solar Panels in Providence RI',
            img: 'images/Providence_preview_image.png',
            iframeUrl: 'https://kluchman.github.io/Providence_Solar_Panels_Lab09/'
            },
            'WCS_Presentation': {
            title: 'Wildlife Conservation Society Presentation',
            img: 'images/WCS_Example_slide_3.png',
            iframeUrl: 'files/WCS_Presentation.pdf'
            },
            'project_NEARC_Poster': {
            title: 'Environmental Injustice and UHI in Worcester',
            img: 'images/Nearc_Image.png',
            iframeUrl: 'images/CK_NEARC_2024_Poster.pptx.pdf'
            },
            'project_NESTVAL_Poster': {
            title: 'Tree Survivorship Poster',
            img: 'images/HERO2023_Quant_Poster.png',
            iframeUrl: 'images/HERO2023_Quant_Poster.png'
            },
            'project_DEVELOP_Presentation': {
            title: 'Asheville UHI Effect and Offset Plans',
            img: 'images/DEVELOP_Titlepage.png',
            iframeUrl: 'images/2024NASA_DEVELOP_NCEI_AshevilleUrbanII_Presentation.pptx.pdf'
            },
            // Random Forest carousel (now in Maps section)
            'Random_Forest_Maps': {
            title: 'Example Projects - Random Forest LULC Classification in R',
            img: 'images/RF_Spectral_LandCover.png'
            }
        };

        const modal = document.getElementById('modal');
        const modalMapContainer = document.getElementById('modal-map');

        modal.style.display = 'flex';
        modalMapContainer.innerHTML = '';

        if (projectId === 'Random_Forest_Maps') {
            // Create carousel container for Random Forest Maps
            const carouselDiv = document.createElement('div');
            carouselDiv.className = 'carousel';

            // Define an array with the URLs for your 5 maps.
            const maps = [
            'images/MAFOMP_Landcover.png',
            'images/RF_Spectral_LandCover.png',
            'images/rf_with_Ancillary.png',
            'images/rf_with_spectral_and_ancillary.png',
            'images/rf_with_transform.png'
            ];

            // Create a slide for each map in the array (use <img>, not <iframe>)
            maps.forEach(url => {
            const slideDiv = document.createElement('div');
            slideDiv.className = 'carousel-slide';
            const img = document.createElement('img');
            img.src = url;
            img.alt = 'Random Forest LULC output map';
            slideDiv.appendChild(img);
            carouselDiv.appendChild(slideDiv);
            });

            // Create navigation buttons for the carousel
            const prevBtn = document.createElement('button');
            prevBtn.id = 'prev-btn';
            prevBtn.className = 'carousel-btn';
            prevBtn.innerHTML = '&#10094;';
            prevBtn.onclick = prevSlide;
            const nextBtn = document.createElement('button');
            nextBtn.id = 'next-btn';
            nextBtn.className = 'carousel-btn';
            nextBtn.innerHTML = '&#10095;';
            nextBtn.onclick = nextSlide;
            
            carouselDiv.appendChild(prevBtn);
            carouselDiv.appendChild(nextBtn);

            // Create a description block underneath the carousel
            const descriptionDiv = document.createElement('div');
            descriptionDiv.id = 'carousel-description';
            descriptionDiv.textContent = 'This classification analysis was conducted using the Random Forests algorithm in R. The maps show the effect that different sets of input data have on the resulting classification. Input data included Landsat 5 spectral data (bands 1,2,3,4,5, and 7), a Digital Elevation Model (DEM), Precipitation, Slope, Solar radiation, Southwestness, and Terrain Wetness Index.';

            modalMapContainer.appendChild(carouselDiv);
            modalMapContainer.appendChild(descriptionDiv);

            // Initialize the carousel
            slideIndex = 0;
            showSlide(slideIndex);

        } else {
            // Non-carousel project handling (PDFs and web apps)
            const project = projects[projectId];
            if (!project) return;

            if (project.iframeUrl.toLowerCase().endsWith('.pdf')) {
              const embed = document.createElement('embed');
              embed.src = project.iframeUrl;
              embed.type = 'application/pdf';
              embed.style.width = '100%';
              embed.style.height = '100%';   // full height for easier PDF paging
              modalMapContainer.appendChild(embed);
            } else {
              const iframe = document.createElement('iframe');
              iframe.src = project.iframeUrl;
              iframe.style.width = '100%';
              iframe.style.height = '100%';
              iframe.style.border = 'none';
              modalMapContainer.appendChild(iframe);
            }
        }
    }

    // Closes the modal when the close button is clicked or user clicks outside the modal content.
    function closeModal() {
      const modal = document.getElementById('modal');
      modal.style.display = 'none';
    }

    window.onclick = function (event) {
      const modal = document.getElementById('modal');
      if (event.target === modal) {
        modal.style.display = 'none';
      }
    };

    // Carousel functions
    function showSlide(n) {
      const slides = document.getElementsByClassName('carousel-slide');
      if (slides.length === 0) return;
      if (n >= slides.length) {
        slideIndex = 0;
      }
      if (n < 0) {
        slideIndex = slides.length - 1;
      }
      // Hide all slides first
      for (let i = 0; i < slides.length; i++) {
        slides[i].style.display = 'none';
      }
      slides[slideIndex].style.display = 'block';
    }

    function nextSlide() {
      slideIndex++;
      showSlide(slideIndex);
    }

    function prevSlide() {
      slideIndex--;
      showSlide(slideIndex);
    }
    
  </script>
</body>
</html>
